{"version":3,"sources":["webpack:///./node_modules/leaflet.antimeridian/dist/leaflet.antimeridian-src.js","webpack:///./node_modules/@openeo/vue-components/components/Collection.vue?9675","webpack:///./node_modules/@openeo/vue-components/components/Collection.vue?4a04","webpack:///node_modules/@openeo/vue-components/components/Collection.vue","webpack:///./node_modules/@openeo/vue-components/components/Collection.vue?ef45","webpack:///./node_modules/@openeo/vue-components/components/Collection.vue","webpack:///./node_modules/@radiantearth/stac-fields/formatters.js","webpack:///./node_modules/@openeo/vue-components/components/internal/StacMixin.js"],"names":["global","factory","exports","this","version","sign","x","NaN","calculateAntimeridianLat","latLngA","latLngB","L","LatLng","lat","temp","A","Math","abs","lng","B","a","Error","isCrossMeridian","pushLatLng","ring","projectedBounds","latlng","map","Array","Bounds","Map","push","latLngToLayerPoint","extend","length","isBreakRing","breakRing","currentLat","nextLat","rings","breakLat","breakLatLngs","shift","pop","Polyline","_projectLatlngs","latlngs","result","isMultiRing","_createRings","i","len","compareLatLng","_getCompareLatLng","currentLatLng","_map","secondMeridianLatLng","_startNextRing","wrappedPolyline","options","Wrapped","Polygon","_checkConcaveRings","_joinLastRing","isLastLatLng","unshift","firstRing","lastRing","firstLatLng","layerPointToLatLng","middleLatLng","lastLatLng","newRing","concat","splice","wrappedPolygon","render","_vm","_h","$createElement","_c","_self","staticClass","_t","attrs","data","id","_v","_s","$props","title","_e","description","hasElements","keywords","_l","keyword","key","domProps","license","thumbnails","img","href","temporalIntervals","boundingBoxes","interval","stac","formatTemporalExtent","ref","bbox","mapOptions","provider","url","name","roles","role","r","dim","type","on","scrollToBands","axis","extent","formatExtent","isArray","values","value","step","reference_system","formatEPSG","formatWKT2","assetLinks","links","staticRenderFns","component","Registry","externalRenderer","prefix","spec","Fields","extensions","_","normalizeField","field","metadata","assets","specs","addMetadataField","str","String","replace","arr","sort","formatter","list","tag","slice","DataTypes","null","join","rel","target","e","obj","html","label","formatKey","Object","split","part","substr","toUpperCase","fields","parts","alias","assign","format","Formatters","isObject","items","itemOrder","i1","i2","order","localeCompare","item","hexString","Uint8Array","match","byte","parseInt","bytes","reduce","toString","padStart","objectList","o","keys","k","indexOf","unit","toList","v","toObject","num","parseFloat","toLocaleString","bool","boolean","number","string","array","object","context","parent","toLink","toLowerCase","Date","timeZone","timeZoneName","error","licenses","filter","link","formatCommonMark","commonmark","reader","Parser","writer","HtmlRenderer","safe","smart","parse","software","formatTimestamp","date","formatted","indent","tabs","repeat","fileSizeUnits","floor","log","pow","toFixed","multihash","meta","decode","hexToUint8","hex","uint8ToHex","digest","fileDataTypes","numeric","undefined","find","formatGrouped","coreKey","groups","ext","extension","properties","getSpecification","isSummarizedListWithKeys","listWithKeys","itemFieldNames","keysFromListOfObjects","fieldName","includes","forEach","explain","minimum","maximum","custom","console","warn","b","formatAssets","formatLinks","formatSummaries","collection","summaries","formatItemProperties","mapping","callback","p","formattedValues","normalizeFields","module","Helper","IMAGE_MEDIA_TYPES","IMAGE_EXTENSIONS","components","Description","DeprecationNotice","LinkList","StacFields","props","default","validator","allowedTypes","height","width","wrapAroundAntimeridian","scrollWheelZoom","allowedKeys","every","computed","noWrap","assetIsImage","watch","initMap","val","enableHtmlProps","methods","asset","$refs","mapContainer","$nextTick","showMap","oldL","window","leaflet","instance","geometries","hasLeaflet","validate","compare","css","$root","$options","shadowRoot","__inject__","leafletOptions","osm","tileLayer","attribution","addTo","addFeatures","style","invalidateSize","updateMapView","onAfterMapInit","bounds","getBounds","zoom","getBoundsZoom","newZoom","min","fitBounds","setZoom","once"],"mappings":"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","file":"js/chunk-b1e34b46.674b5bc1.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.L = global.L || {}, global.L.Wrapped = {})));\n}(this, (function (exports) { 'use strict';\n\nvar version = \"1.0.0+master.7986dc5\";\n\n/*\r\n * @namespace L.Wrapped\r\n * Utility functions to perform calculations not always supported by the\r\n * standard Javascript Math namespace.\r\n */\r\n\r\n// @function sign(Number)\r\n// Returns NaN for non-numbers, 0 for 0, -1 for negative numbers,\r\n// 1 for positive numbers\r\nfunction sign(x) {\r\n\treturn typeof x === 'number' ? x ? x < 0 ? -1 : 1 : 0 : NaN;\r\n}\n\n/*\r\n * @namespace L.Wrapped\r\n * Utility functions to calculate various shared aspects of mapping a line\r\n * accross the antimeridian.\r\n */\r\n\r\n// @function calculateAntimeridianLat (latLngA: L.LatLng, latLngB: L.LatLng)\r\n// Returns the calculated latitude where a line drawn between\r\n// two Latitude/Longitude points will cross the antimeridian.\r\nfunction calculateAntimeridianLat(latLngA, latLngB) {\r\n\tif (latLngA instanceof L.LatLng && latLngB instanceof L.LatLng) {\r\n\t\t// Ensure that the latitude A is less than latidue B. This will allow the\r\n\t\t// crossing point to be calculated based on the proportional similarity of\r\n\t\t// right triangles.\r\n\r\n\t\t// Locate which latitude is lower on the map. This will be the most\r\n\t\t// accute angle of the right triangle. If the lowest latitude is not latLngA\r\n\t\t// then swap the latlngs so it is.\r\n\t\tif (latLngA.lat > latLngB.lat) {\r\n\t\t\tvar temp = latLngA;\r\n\t\t\tlatLngA = latLngB;\r\n\t\t\tlatLngB = temp;\r\n\t\t}\r\n\r\n\t\t// This gets the width of the distance between the two points\r\n\t\t// (The bottom of a large right triangle drawn between them)\r\n\t\tvar A = 360 - Math.abs(latLngA.lng - latLngB.lng);\r\n\t\t// This gets the height of the of distance between the two points\r\n\t\t// (The vertical line of a large right triange drawn between them)\r\n\t\tvar B = latLngB.lat - latLngA.lat;\r\n\t\t// This gets the bottom distance of a proportional triangle inside the large\r\n\t\t// trangle where the vertical line instead sits at the 180 mark.\r\n\t\tvar a = Math.abs(180 - Math.abs(latLngA.lng));\r\n\r\n\t\t// Because triangle with identical angles must be proportional along the sides,\r\n\t\t// find the length of the vertical side of that inner triangle and then\r\n\t\t// add it to the lower point to predict the crossing point of the Antimeridian.\r\n\t\treturn latLngA.lat + ((B * a) / A);\r\n\t} else {\r\n\t\tthrow new Error('In order to calculate the Antimeridian latitude, two valid LatLngs are required.');\r\n\t}\r\n}\r\n\r\n// @function isCrossAntimeridian(latLngA: L.LatLng, latLngB: L.LatLng)\r\n// Returns true if the line between the two points will cross either\r\n// the prime meridian (Greenwich) or its antimeridian (International Date Line)\r\nfunction isCrossMeridian(latLngA, latLngB) {\r\n\tif (latLngA instanceof L.LatLng && latLngB instanceof L.LatLng) {\r\n\t\t// Returns true if the signs are not the same.\r\n\t\treturn sign(latLngA.lng) * sign(latLngB.lng) < 0;\r\n\t} else {\r\n\t\tthrow new Error('In order to calculate whether two LatLngs cross a meridian, two valid LatLngs are required.');\r\n\t}\r\n}\r\n\r\n\r\n// @function pushLatLng(ring: L.Point[], projectedBounds: L.Bounds, latlng: L.LatLng, map: L.Map)\r\n// Adds the latlng to the current ring as a layer point and expands the projected bounds.\r\nfunction pushLatLng(ring, projectedBounds, latlng, map) {\r\n\tif (ring instanceof Array && projectedBounds instanceof L.Bounds && latlng instanceof L.LatLng && map instanceof L.Map) {\r\n\t\tring.push(map.latLngToLayerPoint(latlng));\r\n\t\tprojectedBounds.extend(ring[ring.length - 1]);\r\n\t} else {\r\n\t\tthrow new Error('In order to push a LatLng into a ring, the ring point array, the LatLng, the projectedBounds, and the map must all be valid.');\r\n\t}\r\n}\r\n\r\n// @function isBreakRing(latLngA: L.LatLng, latLngB: L.LatLng)\r\n// Determines when the ring should be broken and a new one started.\r\n// This will return true if the distance is smaller when mapped across the Antimeridian.\r\nfunction isBreakRing(latLngA, latLngB) {\r\n\tif (latLngA instanceof L.LatLng && latLngB instanceof L.LatLng) {\r\n\t\treturn isCrossMeridian(latLngA, latLngB)  &&\r\n\t\t(360 - Math.abs(latLngA.lng) - Math.abs(latLngB.lng) < 180);\r\n\r\n\t} else {\r\n\t\tthrow new Error('In order to calculate whether the ring created by two LatLngs should be broken, two valid LatLngs are required.');\r\n\t}\r\n}\r\n\r\n// @function breakRing(currentLat: L.LatLng, nextLat: L.LatLng, rings: L.Point[][],\r\n//  projectedBounds: L.Bounds, map: L.Map)\r\n// Breaks the existing ring along the anti-meridian.\r\n// returns the starting latLng for the next ring.\r\nfunction breakRing(currentLat, nextLat, rings, projectedBounds, map) {\r\n\tif (currentLat instanceof L.LatLng && nextLat instanceof L.LatLng && rings instanceof Array && projectedBounds instanceof L.Bounds && map instanceof L.Map) {\r\n\t\tvar ring = rings[rings.length - 1];\r\n\r\n\t\t// Calculate two points for the anti-meridian crossing.\r\n\t\tvar breakLat = calculateAntimeridianLat(currentLat, nextLat);\r\n\t\tvar breakLatLngs = [new L.LatLng(breakLat, 180), new L.LatLng(breakLat, -180)];\r\n\r\n\t\t// Add in first anti-meridian latlng to this ring to finish it.\r\n\t\t// Positive if positive, negative if negative.\r\n\t\tif (sign(currentLat.lng) > 0) {\r\n\t\t\tpushLatLng(ring, projectedBounds, breakLatLngs.shift(), map);\r\n\t\t} else {\r\n\t\t\tpushLatLng(ring, projectedBounds, breakLatLngs.pop(), map);\r\n\t\t}\r\n\r\n\t\t// Return the second anti-meridian latlng\r\n\t\treturn breakLatLngs.pop();\r\n\t} else {\r\n\t\tthrow new Error('In order to break a ring, all the inputs must exist and be valid.');\r\n\t}\r\n}\n\n/*\r\n * @namespace L.Wrapped\r\n * A polyline that will automatically split and wrap around the Antimeridian (Internation Date Line).\r\n */\r\nvar Polyline = L.Polyline.extend({\r\n\r\n\t// recursively turns latlngs into a set of rings with projected coordinates\r\n\t// This is the entrypoint that is called from the overriden class to change\r\n\t// the rendering.\r\n\t_projectLatlngs: function (latlngs, result, projectedBounds) {\r\n\t\tvar isMultiRing = latlngs[0] instanceof L.LatLng;\r\n\r\n\t\tif (isMultiRing) {\r\n\t\t\tthis._createRings(latlngs, result, projectedBounds);\r\n\t\t} else {\r\n\t\t\tfor (var i = 0; i < latlngs.length; i++) {\r\n\t\t\t\tthis._projectLatlngs(latlngs[i], result, projectedBounds);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Creates the rings used to render the latlngs.\r\n\t_createRings: function (latlngs, rings, projectedBounds) {\r\n\t\tvar len = latlngs.length;\r\n\t\trings.push([]);\r\n\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\tvar compareLatLng = this._getCompareLatLng(i, len, latlngs);\r\n\t\t\tvar currentLatLng = latlngs[i];\r\n\r\n\t\t\tpushLatLng(rings[rings.length - 1], projectedBounds, latlngs[i], this._map);\r\n\r\n\t\t\t// If the next point to check exists, then check to see if the\r\n\t\t\t// ring should be broken.\r\n\t\t\tif (compareLatLng && isBreakRing(compareLatLng, currentLatLng)) {\r\n\t\t\t\tvar secondMeridianLatLng = breakRing(currentLatLng, compareLatLng,\r\n\t\t\t\t\trings, projectedBounds, this._map);\r\n\r\n\t\t\t\tthis._startNextRing(rings, projectedBounds, secondMeridianLatLng);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// returns the latlng to compare the current latlng to.\r\n\t_getCompareLatLng: function (i, len, latlngs) {\r\n\t\treturn (i + 1 < len) ? latlngs[i + 1] : null;\r\n\t},\r\n\r\n\t\t// Starts a new ring and adds the second meridian point.\r\n\t_startNextRing: function (rings, projectedBounds, secondMeridianLatLng) {\r\n\t\tvar ring = [];\r\n\t\trings.push(ring);\r\n\t\tpushLatLng(ring, projectedBounds, secondMeridianLatLng, this._map);\r\n\t}\r\n});\r\n\r\n// @factory L.wrappedPolyline(latlngs: LatLng[], options?: Polyline options)\r\n// Instantiates a polyline that will automatically split around the\r\n// antimeridian (Internation Date Line) if that is a shorter path.\r\nfunction wrappedPolyline(latlngs, options) {\r\n\treturn new L.Wrapped.Polyline(latlngs, options);\r\n}\n\n/*\r\n * @namespace L.Wrapped\r\n * A polygon that will automatically split and wrap around the Antimeridian (Internation Date Line).\r\n */\r\nvar Polygon = L.Polygon.extend({\r\n\r\n\t// recursively turns latlngs into a set of rings with projected coordinates\r\n\t// This is the entrypoint that is called from the overriden class to change\r\n\t// the rendering.\r\n\t_projectLatlngs: function (latlngs, result, projectedBounds) {\r\n\t\tvar isMultiRing = latlngs[0] instanceof L.LatLng;\r\n\r\n\t\tif (isMultiRing) {\r\n\t\t\tthis._createRings(latlngs, result, projectedBounds);\r\n\t\t} else {\r\n\t\t\tfor (var i = 0; i < latlngs.length; i++) {\r\n\t\t\t\tthis._projectLatlngs(latlngs[i], result, projectedBounds);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Creates the rings used to render the latlngs.\r\n\t_createRings: function (latlngs, rings, projectedBounds) {\r\n\t\tvar len = latlngs.length;\r\n\t\trings.push([]);\r\n\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t// Because this is a polygon, there will always be a comparison latlng\r\n\t\t\tvar compareLatLng = this._getCompareLatLng(i, len, latlngs);\r\n\t\t\tvar currentLatLng = latlngs[i];\r\n\r\n\t\t\tpushLatLng(rings[rings.length - 1], projectedBounds, currentLatLng, this._map);\r\n\r\n\t\t\t// Check to see if the ring should be broken.\r\n\t\t\tif (isBreakRing(compareLatLng, currentLatLng)) {\r\n\t\t\t\tvar secondMeridianLatLng = breakRing(currentLatLng, compareLatLng,\r\n\t\t\t\t\trings, projectedBounds, this._map);\r\n\r\n\t\t\t\tthis._startNextRing(rings, projectedBounds, secondMeridianLatLng, i === len - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Join the last two rings if needed.\r\n\t\tthis._checkConcaveRings(rings);\r\n\t\tthis._joinLastRing(rings, latlngs);\r\n\t},\r\n\r\n\t// Starts a new ring if needed and adds the second meridian point to the\r\n\t// correct ring.\r\n\t_startNextRing: function (rings, projectedBounds, secondMeridianLatLng, isLastLatLng) {\r\n\t\tvar ring;\r\n\t\tif (!isLastLatLng) {\r\n\t\t\tring = [];\r\n\t\t\trings.push(ring);\r\n\t\t\tpushLatLng(ring, projectedBounds, secondMeridianLatLng, this._map);\r\n\t\t} else {\r\n\t\t\t// If this is the last latlng, don't bother starting a new ring.\r\n\t\t\t// instead, join the last meridian point to the first point, to connect\r\n\t\t\t// the shape correctly.\r\n\t\t\tring = rings[0];\r\n\t\t\tring.unshift(this._map.latLngToLayerPoint(secondMeridianLatLng));\r\n\t\t\tprojectedBounds.extend(ring[0]);\r\n\t\t}\r\n\t},\r\n\r\n\t// returns the latlng to compare the current latlng to.\r\n\t_getCompareLatLng: function (i, len, latlngs) {\r\n\t\treturn (i + 1 < len) ? latlngs[i + 1] : latlngs[0];\r\n\t},\r\n\r\n\t// Joins the last ring to the first if they were accidentally disconnected by\r\n\t// crossing the anti-meridian\r\n\t_joinLastRing: function (rings, latlngs) {\r\n\t\tvar firstRing = rings[0];\r\n\t\tvar lastRing = rings[rings.length - 1];\r\n\r\n\t\t// If either the first or last latlng cross the meridian immediately, then\r\n\t\t// they will be drawn as a single line, not a polygon, since they will not be\r\n\t\t// connected to the last ring. Reconnect them.\r\n\t\tif (rings.length > 1 && (firstRing.length === 2 || lastRing.length === 2) &&\r\n\t\t\t !isCrossMeridian(latlngs[0], latlngs[latlngs.length - 1])) {\r\n\t\t\tvar len = lastRing.length;\r\n\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\tfirstRing.unshift(lastRing.pop());\r\n\t\t\t}\r\n\t\t\t// Remove the empty ring.\r\n\t\t\trings.pop();\r\n\t\t}\r\n\t},\r\n\r\n\t// Check for concave sections of the rings and join the rings if they are\r\n\t// concave\r\n\t_checkConcaveRings: function (rings) {\r\n\t\tvar firstLatLng = this._map.layerPointToLatLng(rings[0][0]);\r\n\r\n\t\tfor (var i = 0; i <= rings.length - 3; i++) {\r\n\t\t\tvar middleLatLng = this._map.layerPointToLatLng(rings[i + 1][0]);\r\n\t\t\tvar lastLatLng = this._map.layerPointToLatLng(rings[i + 2][0]);\r\n\r\n\t\t\t// If the meridian is crossed and then is crossed again\r\n\t\t\t// over the first polygon, the polygon is concave. Join the rings.\r\n\t\t\tif (isCrossMeridian(firstLatLng, middleLatLng) &&\r\n\t\t\tisCrossMeridian(middleLatLng, lastLatLng)) {\r\n\t\t\t\tvar firstRing = rings[0];\r\n\t\t\t\tvar lastRing = rings[i + 2];\r\n\r\n\t\t\t\tvar newRing = firstRing.concat(lastRing);\r\n\r\n\t\t\t\t// Remove the joined polygon and then update the first polygon.\r\n\t\t\t\trings.splice(i + 2, 1);\r\n\t\t\t\trings.splice(0, 1, newRing);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// @factory L.wrappedPolygon(latlngs: LatLng[], options?: Polygon options)\r\n// Instantiates a polygon that will automatically split around the\r\n// antimeridian (Internation Date Line) if that is a shorter path.\r\nfunction wrappedPolygon(latlngs, options) {\r\n\treturn new L.Wrapped.Polygon(latlngs, options);\r\n}\n\nexports.version = version;\nexports.Polyline = Polyline;\nexports.wrappedPolyline = wrappedPolyline;\nexports.Polygon = Polygon;\nexports.wrappedPolygon = wrappedPolygon;\nexports.calculateAntimeridianLat = calculateAntimeridianLat;\nexports.isCrossMeridian = isCrossMeridian;\nexports.isBreakRing = isBreakRing;\nexports.sign = sign;\n\n})));\n//# sourceMappingURL=leaflet.antimeridian-src.js.map\n","export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./Collection.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"vue-component stac collection\"},[_vm._t(\"title\",[_c('a',{staticClass:\"anchor\",attrs:{\"name\":_vm.data.id}}),_c('h2',[_vm._v(_vm._s(_vm.data.id))])],null,_vm.$props),(_vm.data.title)?_c('summary',[_vm._v(_vm._s(_vm.data.title))]):_vm._e(),_vm._t(\"before-description\",null,null,_vm.$props),(_vm.data.description)?_c('section',{staticClass:\"description\"},[_c('h3',[_vm._v(\"Description\")]),_c('Description',{attrs:{\"description\":_vm.data.description}}),(_vm.data.deprecated)?_c('DeprecationNotice',{attrs:{\"entity\":\"collection\"}}):_vm._e(),(_vm.hasElements(_vm.data.keywords))?_c('div',[_c('strong',[_vm._v(\"Keywords:\")]),_vm._v(\" \"),_c('ul',{staticClass:\"comma-separated-list\"},_vm._l((_vm.data.keywords),function(keyword,i){return _c('li',{key:i},[_vm._v(_vm._s(keyword))])}),0)]):_vm._e()],1):_vm._e(),_c('section',{staticClass:\"license\"},[_c('h3',[_vm._v(\"License\")]),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.license)}})]),(_vm.thumbnails.length)?_c('section',{staticClass:\"preview\"},[_c('h3',[_vm._v(\"Previews\")]),_c('div',{staticClass:\"thumbnails\"},_vm._l((_vm.thumbnails),function(img,i){return _c('a',{key:i,attrs:{\"href\":img.href,\"target\":\"_blank\"}},[_c('img',{attrs:{\"src\":img.href,\"title\":img.title,\"alt\":img.title || 'Preview'}})])}),0)]):_vm._e(),(_vm.temporalIntervals.length || _vm.boundingBoxes.length)?_c('section',{staticClass:\"extent\"},[(_vm.temporalIntervals.length)?[_c('h3',[_vm._v(\"Temporal Extent\")]),_vm._t(\"temporal-extents\",_vm._l((_vm.temporalIntervals),function(interval,i){return _c('ul',{key:i},[_c('li',[_vm._v(_vm._s(_vm.stac.formatTemporalExtent(interval)))])])}),{\"extents\":_vm.temporalIntervals})]:_vm._e(),(_vm.boundingBoxes.length)?[_c('h3',[_vm._v(\"Spatial Extent\")]),_vm._t(\"spatial-extents\",[_c('div',{ref:\"mapContainer\",staticClass:\"map\"},[(!_vm.map)?_vm._l((_vm.boundingBoxes),function(bbox,i){return _c('ul',{key:i},[_c('li',[_vm._v(\"Latitudes: \"+_vm._s(bbox[1])+\" / \"+_vm._s(bbox[3])+\", Longitudes: \"+_vm._s(bbox[0])+\" / \"+_vm._s(bbox[2]))])])}):_vm._e()],2)],{\"extents\":_vm.boundingBoxes,\"mapOptions\":_vm.mapOptions})]:_vm._e()],2):_vm._e(),(_vm.data.providers)?_c('section',{staticClass:\"providers\"},[_c('h3',[_vm._v(\"Providers\")]),_c('ol',_vm._l((_vm.data.providers),function(provider,key){return _c('li',{key:key},[(provider.url)?_c('a',{attrs:{\"href\":provider.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(provider.name))]):[_vm._v(_vm._s(provider.name))],(_vm.hasElements(provider.roles))?[_vm._v(\" (\"),_c('ul',{staticClass:\"comma-separated-list\"},_vm._l((provider.roles),function(role,r){return _c('li',{key:r,staticClass:\"provider-role\"},[_vm._v(_vm._s(role))])}),0),_vm._v(\") \")]:_vm._e(),(provider.description)?_c('Description',{attrs:{\"description\":provider.description,\"compact\":true}}):_vm._e()],2)}),0)]):_vm._e(),(_vm.hasDimensions)?_c('section',{staticClass:\"dimensions\"},[_c('h3',[_vm._v(\"Data Cube Dimensions\")]),_c('ul',_vm._l((_vm.data['cube:dimensions']),function(dim,name){return _c('li',{key:name,staticClass:\"dimension\"},[_c('h4',[(dim.type === 'bands')?_c('a',{staticClass:\"name\",attrs:{\"href\":\"#summary_eo:bands\"},on:{\"click\":_vm.scrollToBands}},[_vm._v(_vm._s(name))]):_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(name))]),_c('ul',{staticClass:\"type badges small\"},[_c('li',{staticClass:\"badge\"},[_vm._v(_vm._s(dim.type))])])]),(dim.description)?_c('Description',{attrs:{\"description\":dim.description}}):_vm._e(),(dim.axis)?_c('div',{staticClass:\"tabular\"},[_c('label',[_vm._v(\"Axis:\")]),_c('div',{staticClass:\"value\"},[_vm._v(_vm._s(dim.axis))])]):_vm._e(),_c('div',{staticClass:\"tabular\"},[_c('label',[_vm._v(\"Labels:\")]),(dim.extent)?_c('div',{staticClass:\"value\"},[(dim.type === 'temporal')?[_vm._v(_vm._s(_vm.stac.formatTemporalExtent(dim.extent)))]:[_vm._v(_vm._s(_vm.stac.formatExtent(dim.extent)))]],2):(Array.isArray(dim.values) && dim.values.length > 0)?_c('ul',{staticClass:\"value\"},_vm._l((dim.values),function(value,i){return _c('li',{key:i},[_vm._v(_vm._s(value))])}),0):_c('div',{staticClass:\"value\"},[_c('i',[_vm._v(\"n/a\")])])]),(typeof dim.step !== 'undefined')?_c('div',{staticClass:\"tabular\"},[_c('label',[_vm._v(\"Steps:\")]),_c('div',{staticClass:\"value\"},[(dim.step === null)?[_vm._v(\"irregularly spaced\")]:[_vm._v(_vm._s(dim.step))]],2)]):_vm._e(),(typeof dim.reference_system !== 'undefined')?_c('div',{staticClass:\"tabular\"},[_c('label',[_vm._v(\"Reference System:\")]),_c('div',{staticClass:\"value\"},[(typeof dim.reference_system === 'number')?_c('div',{staticClass:\"epsg\",domProps:{\"innerHTML\":_vm._s(_vm.stac.formatEPSG(dim.reference_system))}}):(typeof dim.reference_system === 'string')?_c('div',{staticClass:\"wkt2\",domProps:{\"innerHTML\":_vm._s(_vm.stac.formatWKT2(dim.reference_system))}}):(typeof dim.reference_system === 'object')?_c('ObjectTree',{attrs:{\"data\":dim.reference_system}}):[_vm._v(_vm._s(dim.reference_system))]],2)]):_vm._e()],1)}),0)]):_vm._e(),_c('StacFields',{staticClass:\"summaries\",attrs:{\"metadata\":_vm.data}}),_c('section',{staticClass:\"assets\"},[_c('LinkList',{attrs:{\"links\":_vm.assetLinks,\"heading\":\"Assets\",\"headingTag\":\"h3\"}})],1),_c('section',{staticClass:\"links\"},[_c('LinkList',{attrs:{\"links\":_vm.data.links,\"heading\":\"See Also\",\"headingTag\":\"h3\",\"ignoreRel\":['self', 'parent', 'root', 'license', 'cite-as']}})],1),_vm._t(\"end\",null,null,_vm.$props)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<article class=\"vue-component stac collection\">\r\n\r\n\t\t<slot name=\"title\" v-bind=\"$props\">\r\n\t\t\t<a class=\"anchor\" :name=\"data.id\"></a>\r\n\t\t\t<h2>{{ data.id }}</h2>\r\n\t\t</slot>\r\n\r\n\t\t<summary v-if=\"data.title\">{{ data.title }}</summary>\r\n\r\n\t\t<slot name=\"before-description\" v-bind=\"$props\"></slot>\r\n\r\n\t\t<section class=\"description\" v-if=\"data.description\">\r\n\t\t\t<h3>Description</h3>\r\n\r\n\t\t\t<Description :description=\"data.description\"></Description>\r\n\r\n\t\t\t<DeprecationNotice v-if=\"data.deprecated\" entity=\"collection\" />\r\n\r\n\t\t\t<div v-if=\"hasElements(data.keywords)\">\r\n\t\t\t\t<strong>Keywords:</strong>&nbsp;\r\n\t\t\t\t<ul class=\"comma-separated-list\">\r\n\t\t\t\t\t<li v-for=\"(keyword, i) in data.keywords\" :key=\"i\">{{ keyword }}</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\r\n\t\t<section class=\"license\">\r\n\t\t\t<h3>License</h3>\r\n\t\t\t<span v-html=\"license\" />\r\n\t\t</section>\r\n\r\n\t\t<section class=\"preview\" v-if=\"thumbnails.length\">\r\n\t\t\t<h3>Previews</h3>\r\n\t\t\t<div class=\"thumbnails\">\r\n\t\t\t\t<a v-for=\"(img, i) in thumbnails\" :key=\"i\" :href=\"img.href\" target=\"_blank\">\r\n\t\t\t\t\t<img :src=\"img.href\" :title=\"img.title\" :alt=\"img.title || 'Preview'\" />\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\r\n\t\t<section class=\"extent\" v-if=\"temporalIntervals.length || boundingBoxes.length\">\r\n\t\t\t<template v-if=\"temporalIntervals.length\">\r\n\t\t\t\t<h3>Temporal Extent</h3>\r\n\t\t\t\t<slot name=\"temporal-extents\" :extents=\"temporalIntervals\">\r\n\t\t\t\t\t<ul v-for=\"(interval, i) in temporalIntervals\" :key=\"i\">\r\n\t\t\t\t\t\t<li>{{ stac.formatTemporalExtent(interval) }}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</slot>\r\n\t\t\t</template>\r\n\t\t\r\n\t\t\t<template v-if=\"boundingBoxes.length\">\r\n\t\t\t<h3>Spatial Extent</h3>\r\n\t\t\t\t<slot name=\"spatial-extents\" :extents=\"boundingBoxes\" :mapOptions=\"mapOptions\">\r\n\t\t\t\t\t<div class=\"map\" ref=\"mapContainer\">\r\n\t\t\t\t\t\t<template v-if=\"!map\">\r\n\t\t\t\t\t\t\t<ul v-for=\"(bbox, i) in boundingBoxes\" :key=\"i\">\r\n\t\t\t\t\t\t\t\t<li>Latitudes: {{ bbox[1] }} / {{ bbox[3] }}, Longitudes: {{ bbox[0] }} / {{ bbox[2] }}</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</slot>\r\n\t\t\t</template>\r\n\t\t</section>\r\n\r\n\t\t<section class=\"providers\" v-if=\"data.providers\">\r\n\t\t\t<h3>Providers</h3>\r\n\t\t\t<ol>\r\n\t\t\t\t<li v-for=\"(provider, key) in data.providers\" :key=\"key\">\r\n\t\t\t\t\t<a v-if=\"provider.url\" :href=\"provider.url\" target=\"_blank\">{{ provider.name }}</a>\r\n\t\t\t\t\t<template v-else>{{ provider.name }}</template>\r\n\t\t\t\t\t<template v-if=\"hasElements(provider.roles)\">\r\n\t\t\t\t\t\t(<ul class=\"comma-separated-list\">\r\n\t\t\t\t\t\t\t<li v-for=\"(role, r) in provider.roles\" :key=\"r\" class=\"provider-role\">{{ role }}</li>\r\n\t\t\t\t\t\t</ul>)\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<Description v-if=\"provider.description\" :description=\"provider.description\" :compact=\"true\" />\r\n\t\t\t\t</li>\r\n\t\t\t</ol>\r\n\t\t</section>\r\n\r\n\t\t<section class=\"dimensions\" v-if=\"hasDimensions\">\r\n\t\t\t<h3>Data Cube Dimensions</h3>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"(dim, name) in data['cube:dimensions']\" :key=\"name\" class=\"dimension\">\r\n\t\t\t\t\t<h4>\r\n\t\t\t\t\t\t<a v-if=\"dim.type === 'bands'\" @click=\"scrollToBands\" class=\"name\" href=\"#summary_eo:bands\">{{ name }}</a>\r\n\t\t\t\t\t\t<span v-else class=\"name\">{{ name }}</span>\r\n\t\t\t\t\t\t<ul class=\"type badges small\"><li class=\"badge\">{{ dim.type }}</li></ul>\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<Description v-if=\"dim.description\" :description=\"dim.description\" />\r\n\t\t\t\t\t<div class=\"tabular\" v-if=\"dim.axis\">\r\n\t\t\t\t\t\t<label>Axis:</label>\r\n\t\t\t\t\t\t<div class=\"value\">{{ dim.axis }}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"tabular\">\r\n\t\t\t\t\t\t<label>Labels:</label>\r\n\t\t\t\t\t\t<div v-if=\"dim.extent\" class=\"value\">\r\n\t\t\t\t\t\t\t<template v-if=\"dim.type === 'temporal'\">{{ stac.formatTemporalExtent(dim.extent) }}</template>\r\n\t\t\t\t\t\t\t<template v-else>{{ stac.formatExtent(dim.extent) }}</template>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul v-else-if=\"Array.isArray(dim.values) && dim.values.length > 0\" class=\"value\">\r\n\t\t\t\t\t\t\t<li v-for=\"(value, i) in dim.values\" :key=\"i\">{{ value }}</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<div v-else class=\"value\"><i>n/a</i></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"tabular\" v-if=\"typeof dim.step !== 'undefined'\">\r\n\t\t\t\t\t\t<label>Steps:</label>\r\n\t\t\t\t\t\t<div class=\"value\">\r\n\t\t\t\t\t\t\t<template v-if=\"dim.step === null\">irregularly spaced</template>\r\n\t\t\t\t\t\t\t<template v-else>{{ dim.step }}</template>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"tabular\" v-if=\"typeof dim.reference_system !== 'undefined'\">\r\n\t\t\t\t\t\t<label>Reference System:</label>\r\n\t\t\t\t\t\t<div class=\"value\">\r\n\t\t\t\t\t\t\t<div class=\"epsg\" v-if=\"typeof dim.reference_system === 'number'\" v-html=\"stac.formatEPSG(dim.reference_system)\" />\r\n\t\t\t\t\t\t\t<div class=\"wkt2\" v-else-if=\"typeof dim.reference_system === 'string'\" v-html=\"stac.formatWKT2(dim.reference_system)\" />\r\n\t\t\t\t\t\t\t<ObjectTree v-else-if=\"typeof dim.reference_system === 'object'\" :data=\"dim.reference_system\" />\r\n\t\t\t\t\t\t\t<template v-else>{{ dim.reference_system }}</template>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</section>\r\n\r\n\t\t<StacFields class=\"summaries\" :metadata=\"data\" />\r\n\r\n\t\t<section class=\"assets\">\r\n\t\t\t<LinkList :links=\"assetLinks\" heading=\"Assets\" headingTag=\"h3\" />\r\n\t\t</section>\r\n\r\n\t\t<section class=\"links\">\r\n\t\t\t<LinkList :links=\"data.links\" heading=\"See Also\" headingTag=\"h3\" :ignoreRel=\"['self', 'parent', 'root', 'license', 'cite-as']\" />\r\n\t\t</section>\r\n\r\n\t\t<slot name=\"end\" v-bind=\"$props\"></slot>\r\n\r\n\t</article>\r\n</template>\r\n\r\n<script>\r\nimport Utils from '../utils';\r\nimport { Formatters } from '@radiantearth/stac-fields';\r\nimport StacMixin from './internal/StacMixin.js';\r\n\r\nexport default {\r\n\tname: 'Collection',\r\n\tcomponents: {\r\n\t\tObjectTree: () => import('./ObjectTree.vue')\r\n\t},\r\n\tmixins: [StacMixin],\r\n\t// Mixins don't work properly in web components,\r\n\t// see https://github.com/vuejs/vue-web-component-wrapper/issues/30\r\n\tprops: {...StacMixin.props},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstac: Formatters\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tshowMap() {\r\n\t\t\treturn this.boundingBoxes.length !== 0;\r\n\t\t},\r\n\t\ttemporalIntervals() {\r\n\t\t\tlet e = this.data.extent;\r\n\t\t\tif (Utils.isObject(e) && Utils.isObject(e.temporal) && Utils.size(e.temporal.interval) > 0) {\r\n\t\t\t\treturn e.temporal.interval.filter(interval => Array.isArray(interval) && interval.length >= 2);\r\n\t\t\t}\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\tboundingBoxes() {\r\n\t\t\tlet e = this.data.extent;\r\n\t\t\tif (Utils.isObject(e) && Utils.isObject(e.spatial) && Utils.size(e.spatial.bbox) > 0) {\r\n\t\t\t\treturn e.spatial.bbox.filter(bbox => Array.isArray(bbox) && bbox.length >= 4);\r\n\t\t\t}\r\n\t\t\treturn [];\r\n\t\t},\r\n\t\thasDimensions() {\r\n\t\t\treturn Utils.size(this.data['cube:dimensions']) > 0;\r\n\t\t},\r\n\t\tlicense() {\r\n\t\t\tif (typeof this.data.license !== 'string' || this.data.license.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn Formatters.formatLicense(this.data.license, null, null, this.data);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\taddFeatures() {\r\n\t\t\ttry {\r\n\t\t\t\tL.Wrapped = require('leaflet.antimeridian');\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.warn(`Leaflet Antimeridian plugin is not available: ${error.message}`);\r\n\t\t\t}\r\n\t\t\tlet features = L.featureGroup();\r\n\t\t\tfor(let bbox of this.boundingBoxes) {\r\n\t\t\t\tlet p = [[bbox[1], bbox[0]], [bbox[3], bbox[0]], [bbox[3], bbox[2]], [bbox[1], bbox[2]]];\r\n\t\t\t\tlet geom;\r\n\t\t\t\tif (L.Wrapped && bbox[2] < bbox[0]) {\r\n\t\t\t\t\tgeom = new L.Wrapped.Polygon(p);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tgeom = L.polygon(p);\r\n\t\t\t\t}\r\n\t\t\t\tgeom.setStyle({\r\n\t\t\t\t\tcolor: '#3388ff',\r\n\t\t\t\t\tfillOpacity: 0.2\r\n\t\t\t\t});\r\n\t\t\t\tfeatures.addLayer(geom);\r\n\t\t\t}\r\n\t\t\treturn features;\r\n\t\t},\r\n\t\tscrollToBands(evt) {\r\n\t\t\tlet elem = this.$el.querySelector('#field_eo\\\\:bands');\r\n\t\t\tif (elem) {\r\n\t\t\t\telem.scrollIntoView();\r\n\t\t\t\telem.classList.add('highlight-box');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\telem.classList.remove('highlight-box');\r\n\t\t\t\t}, 5000);\r\n\t\t\t}\r\n\t\t\tevt.preventDefault();\r\n\t\t},\r\n\t\thasElements(data) {\r\n\t\t\treturn (typeof data === 'object' && data !== null && Object.keys(data).length > 0);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url('./base.css');\r\n\r\n.vue-component.collection .dimension h4 {\r\n\tmargin: 0;\r\n}\r\n.vue-component.collection .dimension .type {\r\n\tfont-weight: normal;\r\n\tfont-size: 90%;\r\n\tmargin-left: 0.5em;\r\n}\r\n.vue-component.collection .dimension label {\r\n\tfont-weight: normal;\r\n}\r\n.vue-component.collection .provider-role {\r\n\ttext-transform: capitalize;\r\n}\r\n</style>","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--12-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./Collection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--12-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./Collection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Collection.vue?vue&type=template&id=2971c461&\"\nimport script from \"./Collection.vue?vue&type=script&lang=js&\"\nexport * from \"./Collection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Collection.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var Registry = {\r\n\r\n\texternalRenderer: false,\r\n\r\n\taddExtension(prefix, spec) {\r\n\t\tFields.extensions[prefix] = _.normalizeField(spec, Fields.extensions);\r\n\t},\r\n\r\n\taddMetadataField(field, spec) {\r\n\t\tFields.metadata[field] = _.normalizeField(spec, Fields.metadata);\r\n\t},\r\n\r\n\taddLinkField(field, spec) {\r\n\t\tFields.links[field] = _.normalizeField(spec, Fields.links);\r\n\t},\r\n\r\n\taddAssetField(field, spec) {\r\n\t\tFields.assets[field] = _.normalizeField(spec, Fields.assets);\r\n\t},\r\n\r\n\taddMetadataFields(specs) {\r\n\t\tfor(var key in specs) {\r\n\t\t\tRegistry.addMetadataField(key, specs[key]);\r\n\t\t}\r\n\t},\r\n\r\n\tgetSpecification(field, type = null) {\r\n\t\tlet spec = {};\r\n\t\tif (type === 'assets' && Fields.assets[field]) {\r\n\t\t\tspec = Fields.assets[field];\r\n\t\t}\r\n\t\telse if (type === 'links' && Fields.links[field]) {\r\n\t\t\tspec = Fields.links[field];\r\n\t\t}\r\n\t\telse if (Fields.metadata[field]) {\r\n\t\t\tspec = Fields.metadata[field];\r\n\t\t}\r\n\t\treturn spec;\r\n\t}\r\n\r\n};\r\n\r\nvar _ = {\r\n\r\n\te(str) {\r\n\t\tif (typeof str !== 'string') {\r\n\t\t\tstr = String(str);\r\n\t\t}\r\n\t\treturn str.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, '&apos;');\r\n\t},\r\n\r\n\ttoList(arr, sort = false, formatter = null) {\r\n\t\tlet list = arr;\r\n\t\tlet tag = 'ol';\r\n\t\tif (sort) {\r\n\t\t\tlist = list.slice(0).sort();\r\n\t\t\ttag = 'ul';\r\n\t\t}\r\n\t\tif (typeof formatter === 'function') {\r\n\t\t\tlist = list.map(formatter);\r\n\t\t}\r\n\t\tif (list.length === 0) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t\telse if (list.length === 1) {\r\n\t\t\treturn list[0];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn `<${tag}><li>${list.join(\"</li><li>\")}</li></${tag}>`;\r\n\t\t}\r\n\t},\r\n\r\n\ttoLink(url, title = \"\", rel = \"\", target = \"_blank\") {\r\n\t\tif (!title) {\r\n\t\t\tif (url.length > 50) {\r\n\t\t\t\ttitle = url.replace(/^\\w+:\\/\\/([^\\/]+)((\\/[^\\/\\?]+)*\\/([^\\/\\?]+)(\\?.*)?)?$/ig, function(...x) {\r\n\t\t\t\t\tif (x[4]) {\r\n\t\t\t\t\t\treturn x[1] + '/[]/' + x[4]; // There are invisible zero-width whitespaces after and before the slashes. It allows breaking the link in the browser. Be careful when editing.\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn x[1];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttitle = url.replace(/^\\w+:\\/\\//i, '');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn `<a href=\"${_.e(url)}\" rel=\"${_.e(rel)}\" target=\"${_.e(target)}\">${_.e(title)}</a>`;\r\n\t},\r\n\r\n\ttoObject(obj, formatter = null) {\r\n\t\tlet html = '<dl>';\r\n\t\tfor(let key in obj) {\r\n\t\t\t// ToDo: also convert CamelCase? but not abbreviations like \"USA\".\r\n\t\t\tlet label = _.formatKey(key, true);\r\n\t\t\tlet value = obj[key];\r\n\t\t\tif (typeof formatter === 'function') {\r\n\t\t\t\tvalue = formatter(value, key, obj);\r\n\t\t\t}\r\n\t\t\t// TODO: Format label (also in arrays)\r\n\t\t\thtml += `<dt>${label}</dt><dd>${value}</dd>`;\r\n\t\t}\r\n\t\thtml += `</dl>`;\r\n\t\treturn html;\r\n\t},\r\n\r\n\tisObject(obj) {\r\n\t\treturn (typeof obj === 'object' && obj === Object(obj) && !Array.isArray(obj));\r\n\t},\r\n\r\n\tformatKey(key, prefix = false) {\r\n\t\tif (prefix === false) {\r\n\t\t\tkey = key.replace(/^\\w+:/i, '');\r\n\t\t}\r\n\t\treturn _.e(key).split(/[:_\\-\\s]/g).map(part => part.substr(0, 1).toUpperCase() + part.substr(1)).join(' ');\r\n\t},\r\n\r\n\tnormalizeFields(fields) {\r\n\t\tlet parts = ['extensions', 'metadata', 'links', 'assets'];\r\n\t\tfor (let part of parts) {\r\n\t\t\tfor(let key in fields[part]) {\r\n\t\t\t\tfields[part][key] = _.normalizeField(fields[part][key], fields[part]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn fields;\r\n\t},\r\n\r\n\tnormalizeField(spec, fields = {}) {\r\n\t\t// If just a string label is given, make a normal object with a label from it\r\n\t\tif (typeof spec === 'string') {\r\n\t\t\treturn {\r\n\t\t\t\tlabel: spec\r\n\t\t\t};\r\n\t\t}\r\n\t\t// Resolve alias\r\n\t\tif (typeof spec.alias === 'string') {\r\n\t\t\t// As we don't know whether the alias has been resolved so far, resolve it here, too.\r\n\t\t\treturn Object.assign(spec, _.normalizeField(fields[spec.alias], fields));\r\n\t\t}\r\n\r\n\t\t// Add formatting callback as `formatter`\r\n\t\tif (typeof spec.format === 'string') {\r\n\t\t\tspec.formatter = Formatters[`format${spec.format}`];\r\n\t\t}\r\n\r\n\t\t// Normalize items\r\n\t\tif (_.isObject(spec.items)) {\r\n\t\tlet itemOrder = [];\r\n\t\t\tfor(let key in spec.items) {\r\n\t\t\t\tspec.items[key] = _.normalizeField(spec.items[key], fields);\r\n\t\t\t\titemOrder.push(Object.assign({key}, spec.items[key]));\r\n\t\t\t}\r\n\r\n\t\t\tspec.itemOrder = itemOrder\r\n\t\t\t\t.sort((i1, i2) => {\r\n\t\t\t\t\tif (i1.id === true) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (i2.id === true) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof i1.order === 'number' && typeof i2.order === 'number') {\r\n\t\t\t\t\t\treturn i1.order - i2.order;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn i1.label.localeCompare(i2.label);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.map(item => item.key);\r\n\t\t}\r\n\r\n\t\treturn spec;\r\n\t},\r\n\r\n\thexToUint8(hexString) {\r\n\t\tif(hexString.length === 0 || hexString.length % 2 !== 0){\r\n\t\t\tthrow new Error(`The string \"${hexString}\" is not valid hex.`)\r\n\t\t}\r\n  \t\treturn new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\r\n\t},\r\n\r\n\tuint8ToHex(bytes) {\r\n\t\treturn bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\r\n\t},\r\n\r\n\tkeysFromListOfObjects(objectList) {\r\n\t\treturn objectList.reduce(\r\n\t\t\t(arr, o) => Object.keys(o).reduce(\r\n\t\t\t\t(a, k) => {\r\n\t\t\t\t\tif (a.indexOf(k) == -1) {\r\n\t\t\t\t\t\ta.push(k);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn a;\r\n\t\t\t\t},\r\n\t\t\t\tarr\r\n\t\t\t),\r\n\t\t\t[]\r\n\t\t);\r\n\t},\r\n\r\n\tunit(value, unit = '') {\r\n\t\tif (typeof unit === 'string' && unit.length > 0) {\r\n\t\t\treturn `${value}&nbsp;<span class=\"unit\">${unit}</unit>`;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n};\r\n\r\nvar DataTypes = {\r\n\r\n\tarray(arr, sort = false, unit = '') {\r\n\t\treturn _.toList(arr, sort, v => DataTypes.format(v, unit));\r\n\t},\r\n\t\r\n\tobject(obj) {\r\n\t\treturn _.toObject(obj, v => DataTypes.format(v));\r\n\t},\r\n\t\r\n\tnull(label = 'n/a') {\r\n\t\treturn `<i class=\"null\">${label}</i>`;\r\n\t},\r\n\t\r\n\tnumber(num, unit = '') {\r\n\t\tif (typeof num !== 'number') {\r\n\t\t\tnum = parseFloat(num);\r\n\t\t}\r\n\t\treturn _.unit(num.toLocaleString(), unit);\r\n\t},\r\n\r\n\tstring(str, unit = '') {\r\n\t\treturn _.unit(_.e(str).replace(/(\\r\\n|\\r|\\n){2,}/g, '<br />'), unit);\r\n\t},\r\n\t\r\n\tboolean(bool) {\r\n\t\treturn bool ? '' : '';\r\n\t},\r\n\t\r\n\tformat(value, unit = '') {\r\n\t\tif (typeof value === 'boolean') {\r\n\t\t\treturn DataTypes.boolean(value);\r\n\t\t}\r\n\t\telse if (typeof value === 'number') {\r\n\t\t\treturn DataTypes.number(value, unit);\r\n\t\t}\r\n\t\telse if (typeof value === 'string') {\r\n\t\t\treturn DataTypes.string(value, unit);\r\n\t\t}\r\n\t\telse if (Array.isArray(value)) {\r\n\t\t\treturn DataTypes.array(value, unit);\r\n\t\t}\r\n\t\telse if (_.isObject(value)) {\r\n\t\t\treturn DataTypes.object(value);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nvar Formatters = {\r\n\r\n\tformatUrl(value, field, spec, context = null, parent = null) {\r\n\t\tlet title = _.isObject(parent) && typeof parent === 'string' ? parent.title : value;\r\n\t\treturn _.toLink(value, title, parent.rel || \"\");\r\n\t},\r\n\r\n\tformatMediaType(value) {\r\n\t\tif (typeof value !== 'string') {\r\n\t\t\treturn DataTypes.null('Unknown');\r\n\t\t}\r\n\t\tswitch(value.toLowerCase()) {\r\n\t\t\tcase 'image/tiff; application=geotiff':\r\n\t\t\t\treturn 'GeoTIFF image';\r\n\t\t\tcase 'image/tiff; application=geotiff; profile=cloud-optimized':\r\n\t\t\t\treturn 'Cloud-optimized GeoTIFF image';\r\n\t\t\tcase 'image/jp2':\r\n\t\t\t\treturn 'JPEG 2000 image';\r\n\t\t\tcase 'image/png':\r\n\t\t\tcase 'image/apng':\r\n\t\t\t\treturn 'PNG image';\r\n\t\t\tcase 'image/gif':\r\n\t\t\t\treturn 'GIF image';\r\n\t\t\tcase 'image/jpeg':\r\n\t\t\tcase 'image/jpg':\r\n\t\t\t\treturn 'JPEG image';\r\n\t\t\tcase 'image/webp':\r\n\t\t\t\treturn 'WebP image';\r\n\t\t\tcase 'image/svg+xml':\r\n\t\t\t\treturn 'SVG vector image';\r\n\t\t\tcase 'text/xml':\r\n\t\t\tcase 'application/xml':\r\n\t\t\t\treturn 'XML';\r\n\t\t\tcase 'text/json':\r\n\t\t\tcase 'application/json':\r\n\t\t\t\treturn 'JSON';\r\n\t\t\tcase 'application/geo+json':\r\n\t\t\t\treturn 'GeoJSON';\r\n\t\t\tcase 'text/html':\r\n\t\t\t\treturn 'HTML (Website)';\r\n\t\t\tcase 'text/plain':\r\n\t\t\t\treturn 'Text document';\r\n\t\t\tcase 'application/pdf':\r\n\t\t\t\treturn 'PDF document';\r\n\t\t\tcase 'application/octet-stream':\r\n\t\t\t\treturn 'Binary file';\r\n\t\t\tdefault:\r\n\t\t\t\tlet parts = value.toLowerCase().match(/^(\\w+)\\/([\\w-\\+]+)$/);\r\n\t\t\t\tif (Array.isArray(parts) && parts.length >= 2) {\r\n\t\t\t\t\tlet format = _.formatKey(parts[2]);\r\n\t\t\t\t\tswitch(parts[1]) {\r\n\t\t\t\t\t\tcase 'image':\r\n\t\t\t\t\t\t\treturn `${format} image`;\r\n\t\t\t\t\t\tcase 'audio':\r\n\t\t\t\t\t\t\treturn `${format} audio`;\r\n\t\t\t\t\t\tcase 'model':\r\n\t\t\t\t\t\t\treturn `${format} 3D model`;\r\n\t\t\t\t\t\tcase 'video':\r\n\t\t\t\t\t\t\treturn `${format} video`;\r\n\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\tcase 'application':\r\n\t\t\t\t\t\t\treturn format;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn _.e(value);\r\n\t\t}\r\n\t},\r\n\r\n\tformatTimestamp(value) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\treturn new Date(value).toLocaleString([], {\r\n\t\t\t\t\ttimeZone: \"UTC\",\r\n\t\t\t\t\ttimeZoneName: \"short\"\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {}\r\n\t\t}\r\n\t\treturn DataTypes.null();\r\n\t},\r\n\r\n\tformatLicense(value, field, spec, context = null) {\r\n\t\tif (typeof value !== 'string' || value.length === 0) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\r\n\t\t// We could use the spdx-license-ids and/or spdx-to-html packages previously used in STAC Browser,\r\n\t\t// but let's try it without additional dependency for now.\r\n\t\tif (value !== 'proprietary' && value !== 'various' && value.match(/^[\\w\\.\\-]+$/i)) { // SPDX\r\n\t\t\treturn _.toLink(`https://spdx.org/licenses/${value}.html`, value, \"license\");\r\n\t\t}\r\n\t\t\r\n\t\tlet licenses = Array.isArray(context.links) ? context.links.filter(link => (_.isObject(link) && typeof link.href === 'string' && link.rel === 'license')) : [];\r\n\t\treturn _.toList(licenses, false, link => _.toLink(link.href, link.title || value, \"license\"));\r\n\t},\r\n\r\n\tformatProviders(value) {\r\n\t\treturn _.toList(value, false, provider => {\r\n\t\t\tlet name = provider.name;\r\n\t\t\tlet roles = '';\r\n\t\t\tlet description = '';\r\n\t\t\tif (typeof provider.url === 'string' && provider.url.length > 0) {\r\n\t\t\t\tname = _.toLink(provider.url, name);\r\n\t\t\t}\r\n\t\t\tif (Array.isArray(provider.roles) && provider.roles.length > 0) {\r\n\t\t\t\troles = provider.roles.map(r => _.e(r)).join(', ');\r\n\t\t\t\troles = ` (<em>${roles}</em>)`;\r\n\t\t\t}\r\n\t\t\tif (typeof provider.description === 'string' && provider.description.length > 0) {\r\n\t\t\t\tdescription = Formatters.formatCommonMark(provider.description);\r\n\t\t\t}\r\n\t\t\treturn `${name}${roles}${description}`;\r\n\t\t});\r\n\t},\r\n\r\n\tformatCommonMark(value) {\r\n\t\tif (typeof value !== 'string' || value.length === 0) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t\tconst commonmark = require('commonmark');\r\n\t\tlet reader = new commonmark.Parser();\r\n\t\tlet writer = new commonmark.HtmlRenderer({safe: true, smart: true});\r\n\t\tlet html = writer.render(reader.parse(value));\r\n\t\treturn `<div class=\"description\">${html}</div>`;\r\n\t},\r\n\r\n\tformatSoftware(value) {\r\n\t\tif (!_.isObject(value)) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\r\n\t\tlet list = [];\r\n\t\tfor(let software in value) {\r\n\t\t\tlet version = value[software];\r\n\t\t\tif ((typeof version === 'string' && version.length > 0) || typeof version === 'number') {\r\n\t\t\t\tlist.push(`${software} (${version})`);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlist.push(software);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _.toList(list, true);\r\n\t},\r\n\r\n\tformatDOI(value) {\r\n\t\tvalue = _.e(value);\r\n\t\treturn _.toLink(`http://doi.org/${value}`, value);\r\n\t},\r\n\r\n\tformatEPSG(value) {\r\n\t\t// Remove leading 'epsg:' which people sometimes prepend\r\n\t\tif (typeof value === 'string') {\r\n\t\t\tvalue = value.replace(/^epsg:/i, '');\r\n\t\t}\r\n\t\tvalue = parseInt(value, 10);\r\n\t\tif (value > 0) {\r\n\t\t\treturn _.toLink(`http://epsg.io/${value}`, value);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t},\r\n\r\n\tformatExtent(value, unit = '') {\r\n\t\tif (!Array.isArray(value) || value.length < 2 || (value[0] === null && value[1] === null)) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t\telse if (value[0] === null) {\r\n\t\t\treturn `Until ${DataTypes.format(value[1], unit)}`;\r\n\t\t}\r\n\t\telse if (value[1] === null) {\r\n\t\t\treturn `From ${DataTypes.format(value[0], unit)}`;\r\n\t\t}\r\n\t\telse if (value[0] === value[1]) {\r\n\t\t\treturn DataTypes.format(value[0], unit);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn value.map(v => DataTypes.format(v, unit)).join('  ');\r\n\t\t}\r\n\t},\r\n\r\n\t// Helper, not used at the moment\r\n\tformatTemporalExtent(value) {\r\n\t\tif (!Array.isArray(value) || value.length < 2 || (typeof value[0] !== 'string' && typeof value[1] !== 'string')) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t\telse if (typeof value[0] !== 'string') {\r\n\t\t\treturn `Until ${Formatters.formatTimestamp(value[1])}`;\r\n\t\t}\r\n\t\telse if (typeof value[1] !== 'string') {\r\n\t\t\treturn `${Formatters.formatTimestamp(value[0])} until present`;\r\n\t\t}\r\n\t\telse if (value[0] === value[1]) {\r\n\t\t\treturn Formatters.formatTimestamp(value[0]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn value.map(date => Formatters.formatTimestamp(date)).join(' - ');\r\n\t\t}\r\n\t},\r\n\r\n\tformatWKT2(value) {\r\n\t\tif (typeof value !== 'string') {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t\t\r\n\t\t// This is a VERY simplistic WKT2 formatter, which may fail to render properly in some cases.\r\n\t\tlet indent = -1;\r\n\t\tlet formatted;\r\n\t\ttry {\r\n\t\t\tformatted = value.replace(/([A-Z]+)\\[|\\]/g, (match, keyword) => {\r\n\t\t\t\tif (match === ']') {\r\n\t\t\t\t\tindent--;\r\n\t\t\t\t\treturn match;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tindent++;\r\n\t\t\t\t\tlet tabs = \"  \".repeat(indent);\r\n\t\t\t\t\treturn `\\n${tabs}${keyword}[`;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\t// In case the formatting did not work properly\r\n\t\t\t// (usually the number of [ and ] doesn't match)\r\n\t\t\t// just return the unformatted value\r\n\t\t\tformatted = value;\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\treturn `<pre>${formatted}</pre>`;\r\n\t},\r\n\r\n\tfileSizeUnits: ['B', 'kB', 'MB', 'GB', 'TB'],\r\n\r\n\tformatFileSize(value) {\r\n\t\tif (typeof value !== 'number') {\r\n\t\t\treturn _.e(value);\r\n\t\t}\r\n\t\tvar i = value == 0 ? 0 : Math.floor( Math.log(value) / Math.log(1024) );\r\n\t\treturn _.unit(( value / Math.pow(1024, i) ).toFixed(2) * 1, Formatters.fileSizeUnits[i]);\r\n\t},\r\n\r\n\tformatChecksum(value) {\r\n\t\tif (typeof value !== 'string') {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst multihash = require('multihashes');\r\n\t\t\tconst meta = multihash.decode(_.hexToUint8(value));\r\n\t\t\tconst name = _.e(meta.name);\r\n\t\t\tconst hex = _.e(_.uint8ToHex(meta.digest));\r\n\t\t\treturn `<input class=\"checksum-input\" size=\"32\" value=\"${hex}\" readonly /><br />Hashing algorithm: <strong>${name}</strong>`;\r\n\t\t} catch (error) {\r\n\t\t\treturn DataTypes.null();\r\n\t\t}\r\n\t},\r\n\r\n\tfileDataTypes: {\r\n\t\t\"int8\": \"8-bit integer\",\r\n\t\t\"int16\": \"16-bit integer\",\r\n\t\t\"int32\": \"32-bit integer\",\r\n\t\t\"int64\": \"64-bit integer\",\r\n\t\t\"uint8\": \"unsigned 8-bit integer\",\r\n\t\t\"uint16\": \"unsigned 16-bit integer\",\r\n\t\t\"uint32\": \"unsigned 32-bit integer\",\r\n\t\t\"uint64\": \"unsigned 64-bit integer\",\r\n\t\t\"float16\": \"16-bit float\",\r\n\t\t\"float32\": \"32-bit float\",\r\n\t\t\"float64\": \"64-big float\",\r\n\t\t\"cint16\": \"16-bit complex integer\",\r\n\t\t\"cint32\": \"32-bit complex integer\",\r\n\t\t\"cfloat32\": \"32-bit complex float\",\r\n\t\t\"cfloat64\": \"64-bit complex float\",\r\n\t\t\"other\": \"Other\"\r\n\t},\r\n\r\n\tformatFileDataType(value) {\r\n\t\tif (typeof value === 'string' && value in Formatters.fileDataTypes) {\r\n\t\t\treturn `<abbr title=\"${Formatters.fileDataTypes[value]}\">${value}</abbr>`;\r\n\t\t}\r\n\r\n\t\treturn DataTypes.null();\r\n\t},\r\n\r\n\tformatCSV(value) {\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tlet numeric = value.find(v => typeof v === 'number') !== undefined;\r\n\t\t\t// If there's potentially a comma in the values (decimal or thousand separators in numbers), use semicolon instead of comma.\r\n\t\t\treturn value.map(_.e).join(numeric ? '; ' : ', ');\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn _.e(value);\r\n\t\t}\r\n\t}\r\n\r\n};\r\n\r\nfunction formatGrouped(context, data, type, filter, coreKey) {\r\n\t// Group fields into extensions\r\n\tlet groups = {};\r\n\tfor(let field in data) {\r\n\t\ttry {\r\n\t\t\tlet parts = field.split(':', 2);\r\n\t\t\tif (parts.length === 1) {\r\n\t\t\t\tparts.unshift(coreKey);\r\n\t\t\t}\r\n\t\t\tlet ext = parts[0];\r\n\t\t\tif (typeof filter === 'function' && !filter(field)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Add group if missing\r\n\t\t\tif (!_.isObject(groups[ext])) {\r\n\t\t\t\tgroups[ext] = {\r\n\t\t\t\t\textension: ext,\r\n\t\t\t\t\tlabel: extension(ext),\r\n\t\t\t\t\tproperties: {}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tlet value = data[field];\r\n\t\t\tlet spec = Registry.getSpecification(field, type);\r\n\t\t\t// Special handling for summaries that contain a list with keys (e.g. cube:dimensions, gee:schema)\r\n\t\t\t// There's usually just a single object included, so get that as value\r\n\t\t\tlet isSummarizedListWithKeys = false;\r\n\t\t\tif (type === 'summaries' && spec.listWithKeys && Array.isArray(value) && value.length > 0) {\r\n\t\t\t\tvalue = value[0];\r\n\t\t\t\tisSummarizedListWithKeys = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Fill items with missing properties\r\n\t\t\tlet items = null;\r\n\t\t\tlet itemOrder = [];\r\n\t\t\tif (_.isObject(spec.items)) {\r\n\t\t\t\tlet temp = value;\r\n\t\t\t\t// Ignore keys for lists that are stored as object (e.g. cube:dimensions)\r\n\t\t\t\tif (spec.listWithKeys) {\r\n\t\t\t\t\ttemp = Object.values(temp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet itemFieldNames;\r\n\t\t\t\tif (Array.isArray(temp)) {\r\n\t\t\t\t\titemFieldNames = _.keysFromListOfObjects(temp);\r\n\t\t\t\t}\r\n\t\t\t\telse if (_.isObject(temp)) {\r\n\t\t\t\t\titemFieldNames = Object.keys(temp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titems = {};\r\n\t\t\t\t// Remove fields from list that are not available in the data\r\n\t\t\t\titemOrder = spec.itemOrder.filter(fieldName => itemFieldNames.includes(fieldName));\r\n\r\n\t\t\t\titemFieldNames.forEach(key => {\r\n\t\t\t\t\tif (typeof spec.items[key] === 'undefined') {\r\n\t\t\t\t\t\t// Add fields that are not specified in fields.json\r\n\t\t\t\t\t\titems[key] = {\r\n\t\t\t\t\t\t\tlabel: _.formatKey(key),\r\n\t\t\t\t\t\t\texplain: key\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t// Place non-specified fields at the end\r\n\t\t\t\t\t\titemOrder.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// Copy field spec from fields.json\r\n\t\t\t\t\t\titems[key] = spec.items[key];\r\n\t\t\t\t\t\titems[key].label = label(key, spec.items[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Format values\r\n\t\t\tlet formatted;\r\n\r\n\t\t\t// Handle summaries\r\n\t\t\tif (type === 'summaries') {\r\n\t\t\t\tif (!isSummarizedListWithKeys && _.isObject(value)) {\r\n\t\t\t\t\tif (typeof value.minimum !== 'undefined' && typeof value.minimum !== 'undefined') {\r\n\t\t\t\t\t\tformatted = Formatters.formatExtent([value.minimum, value.maximum], spec.unit);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tformatted = DataTypes.object(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (Registry.externalRenderer && items) {\r\n\t\t\t\t\tlet formatted = isSummarizedListWithKeys ? Object.assign({}, value) : value.slice(0);\r\n\t\t\t\t\t// Go through each field's summary\r\n\t\t\t\t\tfor(let i in formatted) {\r\n\t\t\t\t\t\tlet result = _.isObject(formatted[i]) ? {} : [];\r\n\t\t\t\t\t\t// Go through each entry in a field's summary (this is besically a single value as defined in the Item spec)\r\n\t\t\t\t\t\tfor(let key in items) {\r\n\t\t\t\t\t\t\tresult[key] = format(formatted[i][key], key, context, data, items[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tformatted[i] = result;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (Array.isArray(value)) {\r\n\t\t\t\t\tformatted = _.toList(value, !spec.custom && !spec.items, v => format(v, field, context, data, spec));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.warn(`Invalid summary value: ${value}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Fallback to \"normal\" rendering if not handled by summaries yet\r\n\t\t\tif (typeof formatted === 'undefined') {\r\n\t\t\t\tformatted = format(value, field, context, data, spec);\r\n\t\t\t}\r\n\r\n\t\t\tgroups[ext].properties[field] = {\r\n\t\t\t\tlabel: label(field, spec),\r\n\t\t\t\tvalue,\r\n\t\t\t\tformatted,\r\n\t\t\t\titems,\r\n\t\t\t\titemOrder,\r\n\t\t\t\tspec\r\n\t\t\t};\r\n\t\t} catch(error) {\r\n\t\t\tconsole.error(`Field '${field}' with value '${value}' resulted in an error`, error);\r\n\t\t}\r\n\t}\r\n\treturn Object.values(groups).sort((a,b) => a.extension.localeCompare(b.extension));\r\n\r\n}\r\n\r\n// For assets (item and collection) and item-assets (extension)\r\nfunction formatAssets(assets, context, filter = null, coreKey = '') {\r\n\tlet formatted = {};\r\n\tfor (let key in assets) {\r\n\t\tformatted[key] = formatGrouped(context, assets[key], 'assets', filter, coreKey);\r\n\t}\r\n\treturn formatted;\r\n}\r\n\r\n// For links\r\nfunction formatLinks(links, context, filter = null, coreKey = '') {\r\n\tlet formatted = [];\r\n\tfor (let link of links) {\r\n\t\tformatted.push(formatGrouped(context, link, 'links', filter, coreKey));\r\n\t}\r\n\treturn formatted;\r\n}\r\n\r\n// For Collection summaries\r\nfunction formatSummaries(collection, filter = null, coreKey = '') {\r\n\treturn formatGrouped(collection, collection.summaries, 'summaries', filter, coreKey);\r\n}\r\n\r\n// For item properties\r\nfunction formatItemProperties(item, filter = null, coreKey = '') {\r\n\treturn formatGrouped(item, item.properties, 'metadata', filter, coreKey);\r\n}\r\n\r\nfunction format(value, field, context = null, parent = null, spec = null) {\r\n\tif (!_.isObject(spec)) {\r\n\t\tspec = Fields.metadata[field] || {};\r\n\t}\r\n\r\n\tif (typeof spec.formatter === 'function') {\r\n\t\treturn spec.formatter(value, field, spec, context, parent);\r\n\t}\r\n\telse if (_.isObject(spec.mapping)) {\r\n\t\tlet key = String(value).toLowerCase();\r\n\t\tif (typeof spec.mapping[key] !== 'undefined') {\r\n\t\t\tvalue = spec.mapping[key];\r\n\t\t}\r\n\t\treturn DataTypes.format(value, spec.unit);\r\n\t}\r\n\telse if (value === null && spec.null) {\r\n\t\treturn DataTypes.null(spec.null);\r\n\t}\r\n\telse if (Array.isArray(value)) {\r\n\t\tlet callback = v => format(v, field, context, parent, spec);\r\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items)) {\r\n\t\t\treturn value.map(callback);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn _.toList(value, false, callback);\r\n\t\t}\r\n\t}\r\n\telse if (_.isObject(value) && _.isObject(spec.items)) {\r\n\t\tlet callback = (v, k, p) => format(v, k, context, p, spec.listWithKeys ? Object.assign({}, spec, {listWithKeys: false}) : spec.items[k]);\r\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items)) {\r\n\t\t\tlet formattedValues = {};\r\n\t\t\tfor(let key in value) {\r\n\t\t\t\tformattedValues[key] = callback(value[key], key, value);\r\n\t\t\t}\r\n\t\t\treturn formattedValues;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn _.toObject(value, callback);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\treturn DataTypes.format(value, spec.unit);\r\n\t}\r\n}\r\n\r\nfunction label(key, spec = null) {\r\n\tif (!_.isObject(spec)) {\r\n\t\tspec = Fields.metadata[key] || {};\r\n\t}\r\n\tif (_.isObject(spec) && typeof spec.label === 'string') {\r\n\t\tif (typeof spec.explain === 'string') {\r\n\t\t\treturn `<abbr title=\"${_.e(spec.explain)}\">${spec.label}</abbr>`;\r\n\t\t}\r\n\t\telse if (typeof spec.label === 'string') {\r\n\t\t\treturn spec.label;\r\n\t\t}\r\n\t}\r\n\treturn _.formatKey(key);\r\n}\r\n\r\nfunction extension(key) {\r\n\treturn label(key, Fields.extensions[key]);\r\n}\r\n\r\nvar Fields = _.normalizeFields(require('./fields.json'));\r\n\r\nmodule.exports = {\r\n\tformat,\r\n\tlabel,\r\n\textension,\r\n\tformatSummaries,\r\n\tformatItemProperties,\r\n\tformatAssets,\r\n\tformatLinks,\r\n\tFields,\r\n\tRegistry,\r\n\tHelper: _,\r\n\tDataTypes,\r\n\tFormatters\r\n};","import Utils from '../../utils';\r\nimport Versions from '@openeo/js-commons/src/versions';\r\n\r\nconst IMAGE_MEDIA_TYPES = ['image/apng', 'image/gif', 'image/png', 'image/jpeg', 'image/webp'];\r\nconst IMAGE_EXTENSIONS = ['gif', 'png', 'jpg', 'jpeg', 'webp'];\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tDescription: () => import('../Description.vue'),\r\n\t\tDeprecationNotice: () => import('../DeprecationNotice.vue'),\r\n\t\tLinkList: () => import('../LinkList.vue'),\r\n\t\tStacFields: () => import('../internal/StacFields.vue')\r\n\t},\r\n\tprops: {\r\n\t\tdata: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({})\r\n\t\t},\r\n\t\tmapOptions: {\r\n\t\t\t// It's not possible to specify defaults for the individual properties, therefore this prop is only accessed through a computed property which adds them in.\r\n\t\t\ttype: Object,\r\n\t\t\t// Default values will be set in computed.leafletOptions\r\n\t\t\tdefault: () => ({}),\r\n\t\t\tvalidator: function(value) {\r\n\t\t\t\tconst allowedTypes = {  // keep in sync with Readme\r\n\t\t\t\t\theight: \"string\",\r\n\t\t\t\t\twidth: \"string\",\r\n\t\t\t\t\twrapAroundAntimeridian: \"boolean\",\r\n\t\t\t\t\tscrollWheelZoom: \"boolean\"\r\n\t\t\t\t};\r\n\t\t\t\tconst allowedKeys = Object.keys(allowedTypes);\r\n\t\t\t\treturn typeof value == 'object' && Object.keys(value).every(key =>\r\n\t\t\t\t\tallowedKeys.indexOf(key) != -1 && typeof value[key] == allowedTypes[key]\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmap: null\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tleafletOptions() {\r\n\t\t\treturn {  // keep in sync with Readme\r\n\t\t\t\theight: this.mapOptions.height || \"300px\",\r\n\t\t\t\twidth: this.mapOptions.width || \"auto\",\r\n\t\t\t\tnoWrap: this.mapOptions.wrapAroundAntimeridian === undefined ? true : !this.mapOptions.wrapAroundAntimeridian,  // negate!\r\n\t\t\t\tscrollWheelZoom: this.mapOptions.scrollWheelZoom === undefined ? false : this.mapOptions.scrollWheelZoom\r\n\t\t\t}\r\n\t\t},\r\n\t\tassetLinks() {\r\n\t\t\tif (!Utils.isObject(this.data.assets)) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn Object.values(this.data.assets)\r\n\t\t\t\t// Remove all thumbnails (covered by separate thumbnails viewer)\r\n\t\t\t\t.filter(a => !this.assetIsImage(a))\r\n\t\t\t\t// Convert from asset to links so that LinkList can be used\r\n\t\t\t\t.map(a => {\r\n\t\t\t\t\tif (Array.isArray(a.role) && a.roles.length > 0) {\r\n\t\t\t\t\t\ta.rel = a.roles.join(' ');\r\n\t\t\t\t\t\tdelete a.roles;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn a;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tthumbnails() {\r\n\t\t\tif (!Utils.isObject(this.data.assets)) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn Object.values(this.data.assets).filter(this.assetIsImage);\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tdata() {\r\n\t\t\tthis.initMap();\r\n\t\t},\r\n\t\tshowMap(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.initMap();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbeforeCreate() {\r\n\t\tUtils.enableHtmlProps(this);\r\n\t},\r\n\tmounted() {\r\n\t\tthis.initMap();\r\n\t},\r\n\tmethods: {\r\n\t\tassetIsImage(asset) {\r\n\t\t\tlet ext = typeof asset.href === 'string' ? asset.href.split('.').pop() : '';\r\n\t\t\treturn Array.isArray(asset.roles) && \r\n\t\t\t\t(asset.roles.includes('thumbnail') || asset.roles.includes('overview')) && \r\n\t\t\t\t(IMAGE_MEDIA_TYPES.includes(asset.type) || IMAGE_EXTENSIONS.includes(ext));\r\n\t\t},\r\n\t\tinitLeafletPlugins() {\r\n\t\t\t// To be implemented in Collection/Item, if required.\r\n\t\t},\r\n\t\tasync initMap() {\r\n\t\t\tif (!this.$refs.mapContainer) {\r\n\t\t\t\tawait this.$nextTick();\r\n\t\t\t}\r\n\t\t\tif (!this.$refs.mapContainer || this.map !== null || !this.showMap) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Only use the L for leaflet temporarily and release it later again\r\n\t\t\tlet oldL = window.L;\r\n\t\t\ttry {\r\n\t\t\t\tthis.map = {\r\n\t\t\t\t\tleaflet: null,\r\n\t\t\t\t\tinstance: null,\r\n\t\t\t\t\tgeometries: null\r\n\t\t\t\t};\r\n\t\t\t\t// Leaflet no conflict fix: Try to re-use an already available instance of Leaflet to avoid\r\n\t\t\t\t// conflicts with other libraries such as ipyleaflet. Also, use L variable as long as initMap\r\n\t\t\t\t// is running. For all other cases store Leaflet in this.map.leaflet, which can be used in other places.\r\n\t\t\t\tlet hasLeaflet = () => Utils.isObject(window.L) && Versions.validate(window.L.version) && Versions.compare(window.L.version, \"1.x.x\", \"=\");\r\n\t\t\t\tif (!hasLeaflet()) {\r\n\t\t\t\t\twindow.L = require('leaflet');\r\n\t\t\t\t}\r\n\t\t\t\tif (!hasLeaflet()) {\r\n\t\t\t\t\tconsole.warn(\"Leaflet is not available\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.map.leaflet = window.L;\r\n\r\n\t\t\t\tlet css = await import('leaflet/dist/leaflet.css');\r\n\t\t\t\t// In Web Component mode inject the CSS into the shadowroot\r\n\t\t\t\tif (this.$root && this.$root.$options.shadowRoot && css.__inject__) {\r\n\t\t\t\t\tcss.__inject__(this.$root.$options.shadowRoot);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar map = this.map.leaflet.map(this.$refs.mapContainer, {scrollWheelZoom: this.leafletOptions.scrollWheelZoom});\r\n\t\t\t\tthis.map.instance = map;\r\n\t\t\t\tvar osm = this.map.leaflet.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n\t\t\t\t\tname: 'OpenStreetMap',\r\n\t\t\t\t\tattribution: 'Map data &copy; <a href=\"http://www.osm.org\">OpenStreetMap</a>',\r\n\t\t\t\t\tnoWrap: this.leafletOptions.noWrap\r\n\t\t\t\t});\r\n\t\t\t\tosm.addTo(map);\r\n\r\n\t\t\t\tif (typeof this.addFeatures === 'function') {\r\n\t\t\t\t\tthis.map.geometries = this.addFeatures();\r\n\t\t\t\t\tif (this.map.geometries) {\r\n\t\t\t\t\t\tthis.map.geometries.addTo(map);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Update map container in DOM\r\n\t\t\t\tthis.$refs.mapContainer.style.width = this.leafletOptions.width;\r\n\t\t\t\tthis.$refs.mapContainer.style.height = this.leafletOptions.height;\r\n\t\t\t\tmap.invalidateSize(false);\r\n\t\t\t\tthis.updateMapView();\r\n\r\n\t\t\t\tif (typeof this.mapOptions.onAfterMapInit === 'function') {\r\n\t\t\t\t\ttypeof this.mapOptions.onAfterMapInit(map, this.map.geometries);\r\n\t\t\t\t}\r\n\t\t\t\t// Leaflet no conflict fix: Release L global variable again\r\n\t\t\t\twindow.L = oldL;\r\n\t\t\t\treturn true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\t// Leaflet no conflict fix: Release L global variable again\r\n\t\t\t\twindow.L = oldL;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateMapView() {\r\n\t\t\tif (!this.map || !this.map.geometries) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Compute somewhat smart map extent and zoom level around bbox\r\n\t\t\tvar bounds = this.map.geometries.getBounds();\r\n\t\t\tvar zoom = this.map.instance.getBoundsZoom(bounds);\r\n\t\t\tvar newZoom = Math.min(zoom, 11); // Never zoom closer than 8\r\n\t\t\tif (zoom > 8) {\r\n\t\t\t\tnewZoom = newZoom - 3; // Zoom out three levels\r\n\t\t\t}\r\n\t\t\telse if (zoom > 5) {\r\n\t\t\t\tnewZoom = newZoom - 2; // Zoom out two levels\r\n\t\t\t}\r\n\t\t\telse if (zoom > 2) {\r\n\t\t\t\tnewZoom--; // Zoom out one level\r\n\t\t\t}\r\n\t\t\tthis.map.instance.fitBounds(bounds);\r\n\t\t\tthis.map.instance.setZoom(newZoom);\r\n\r\n\t\t\tthis.map.instance.once('moveend zoomend', () => this.map.instance.invalidateSize(false));\r\n\t\t}\r\n\t}\r\n};"],"sourceRoot":""}